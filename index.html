<!DOCTYPE html>
<html lang="en" data-scheme="professional" data-mode="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Branestawm - Your AI Chief of Staff</title>
    
    <!-- Glooper Design System - Lexend Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Skip link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <div class="container">
        <header class="header" role="banner">
            <div class="header-left">
                <h1>Branestawm</h1>
                <div class="header-subtitle">Your indispensable AI Chief of Staff</div>
            </div>
            <div class="header-controls">
                <div class="tooltip">
                    <button class="btn icon-btn" id="webSearchBtn" aria-label="Open web search options">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                        </svg>
                    </button>
                    <div class="tooltip-content">Web search with Google AI & Perplexity</div>
                </div>
                
                <div class="tooltip">
                    <button class="btn icon-btn" id="settingsBtn" aria-label="Open settings">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                        </svg>
                    </button>
                    <div class="tooltip-content">Open settings</div>
                </div>
                
                <div class="tooltip">
                    <button class="btn icon-btn" id="syncBtn" aria-label="Sync your data to cloud">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M12,18.17L8.83,15L7.42,16.41L12,21L16.58,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.42,7.59L8.83,9L12,5.83Z"/>
                        </svg>
                    </button>
                    <div class="tooltip-content">Sync your data to cloud</div>
                </div>
                
                <div class="tooltip">
                    <button class="btn" id="exportBtn" aria-label="Export your data as markdown files">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                        </svg>
                        <span>Export</span>
                    </button>
                    <div class="tooltip-content">Export your data as markdown files</div>
                </div>
            </div>
        </header>

        <main class="main-content" id="main-content">
            <aside class="sidebar" role="complementary" aria-label="Projects and conversations">
                <div class="sidebar-header">
                    <button class="btn project-selector-btn" id="currentProjectBtn" aria-label="Select project">
                        <span class="current-project-name" id="currentProjectName">Default Project</span>
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M7,10L12,15L17,10H7Z"/>
                        </svg>
                    </button>
                    
                    <div class="recent-projects">
                        <h4>Recent Projects</h4>
                        <div class="recent-projects-list" id="recentProjectsList">
                            <!-- Recent projects will be populated here -->
                        </div>
                    </div>
                    <div class="sidebar-buttons">
                        <div class="tooltip">
                            <button class="btn small" id="newProjectBtn" aria-label="Create a new project to organize your chats">
                                New Project
                            </button>
                            <div class="tooltip-content">Create a new project to organize your chats</div>
                        </div>
                        <div class="tooltip">
                            <button class="btn small" id="newChatBtn" aria-label="Start a new conversation in this project">
                                New Chat
                            </button>
                            <div class="tooltip-content">Start a new conversation in this project</div>
                        </div>
                    </div>
                </div>
                
                <div class="conversations-section">
                    <div class="conversations-header">
                        <h4>Conversations</h4>
                        <button class="btn small secondary" id="browseConversationsBtn" aria-label="Browse all conversations">
                            Browse All
                        </button>
                    </div>
                    <div class="recent-conversations-list" id="recentConversationsList" role="list" aria-label="Recent conversations">
                        <!-- Recent conversations will be populated here -->
                    </div>
                </div>
            </aside>

            <section class="chat-container" role="main" aria-label="Chat conversation">
                <div class="chat-messages" id="chatMessages" role="log" aria-live="polite" aria-label="Chat messages">
                    <div class="message system" role="status">
                        <strong>Welcome to Branestawm!</strong> Your indispensable AI Chief of Staff is here to provide cognitive support and help with executive function challenges.
                        <br><br>
                        <strong>I'm designed to help you:</strong><br>
                        • Break down complex tasks into manageable steps<br>
                        • Organize thoughts and create structured plans<br>
                        • Provide patient, supportive guidance<br>
                        • Search the web when you need current information<br>
                        <br>
                        <strong>Getting Started:</strong><br>
                        • If you haven't set up yet, I'll guide you through the simple process<br>
                        • Use the Import button on Google AI Mode for web search<br>
                        • Use the notes panel to save important information<br>
                        <br>
                        <em>Designed as a cognitive prosthetic to support neurodivergent users with executive function challenges.</em>
                    </div>
                </div>
                <div class="chat-input">
                    <div class="input-container">
                        <label for="messageInput" class="sr-only">Message input</label>
                        <textarea 
                            class="message-input" 
                            id="messageInput" 
                            placeholder="Tell Branestawm what you need help with... (Tip: Visit Google AI Mode for web search, then import results)"
                            aria-label="Type your message here"
                            rows="3"
                        ></textarea>
                        <div class="tooltip">
                            <button class="btn send-btn" id="sendBtn" aria-label="Send message">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                    <path d="M2,21L23,12L2,3V10L17,12L2,14V21Z"/>
                                </svg>
                                <span class="sr-only">Send (Press Enter)</span>
                            </button>
                            <div class="tooltip-content">Send message (Enter)</div>
                        </div>
                    </div>
                </div>
            </section>

            <aside class="artifacts-panel" role="complementary" aria-label="Notes and artifacts">
                <div class="artifacts-header">
                    <h3>Notes</h3>
                    <div class="tooltip">
                        <button class="btn small" id="newArtifactBtn" aria-label="Create a new markdown note">
                            New Note
                        </button>
                        <div class="tooltip-content">Create a new markdown note</div>
                    </div>
                </div>
                <div class="artifacts-list" id="artifactsList" role="list" aria-label="Notes and artifacts">
                    <!-- Notes will be populated here -->
                </div>
            </aside>
        </main>
    </div>

    <!-- Setup Modal for New Users -->
    <div class="modal" id="setupModal" role="dialog" aria-labelledby="setupModalTitle" aria-modal="true">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="setupModalTitle">Welcome to Branestawm</h3>
                <button class="close-btn" aria-label="Close setup modal">×</button>
            </div>
            <div class="setup-intro">
                <p>Choose how you'd like to connect to AI services. We recommend the <strong>Easy Setup</strong> for most users.</p>
            </div>
            
            <div class="setup-options">
                <div class="setup-option" id="easySetupOption" tabindex="0" role="button" aria-describedby="easySetupDesc">
                    <div class="setup-option-content">
                        <div class="setup-option-text">
                            <h4>Easy Setup</h4>
                            <div class="badge">Recommended</div>
                            <p id="easySetupDesc">Sign in with Google to use Gemini 1.5 Flash. Get 1,500 free requests per day with zero configuration.</p>
                        </div>
                        <div class="setup-option-button">
                            <button class="btn" id="googleAuthBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                                </svg>
                                Sign in with Google
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="setup-option" id="advancedSetupOption" tabindex="0" role="button" aria-describedby="advancedSetupDesc">
                    <div class="setup-option-content">
                        <div class="setup-option-text">
                            <h4>Advanced Setup</h4>
                            <div class="badge-spacer"></div>
                            <p id="advancedSetupDesc">Use your own API key with providers like Cerebras (free), OpenAI, OpenRouter, or custom endpoints.</p>
                        </div>
                        <div class="setup-option-button">
                            <button class="btn secondary" id="advancedSetupBtn">Configure API Key</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="setup-footer">
                <p class="help-text">
                    <strong>Privacy:</strong> Your conversations are stored locally on your device. 
                    Cloud sync is optional and uses military-grade encryption.
                </p>
                <p class="help-text" style="margin-top: var(--space-3); font-size: var(--font-size-xs); color: var(--text-tertiary);">
                    <strong>Note:</strong> Google sign-in is currently limited to authorized test users during development.
                </p>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal" role="dialog" aria-labelledby="settingsModalTitle" aria-modal="true">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="settingsModalTitle">Settings</h3>
                <button class="close-btn" aria-label="Close settings modal">×</button>
            </div>
            <div id="settingsContent">
                <!-- Settings content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div class="modal" id="exportModal" role="dialog" aria-labelledby="exportModalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="exportModalTitle">Export Data</h3>
                <button class="close-btn" aria-label="Close export modal">×</button>
            </div>
            <div id="exportContent">
                <p class="help-text">Choose what you'd like to export as markdown files:</p>
                <div class="export-options">
                    <button class="btn" id="exportCurrentBtn">Export Current Conversation</button>
                    <button class="btn" id="exportAllBtn">Export All Data</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Project Modal -->
    <div class="modal" id="projectModal" role="dialog" aria-labelledby="projectModalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="projectModalTitle">New Project</h3>
                <button class="close-btn" aria-label="Close project modal">×</button>
            </div>
            <div id="projectContent">
                <div class="form-group">
                    <label for="projectName" class="label label-required">Project Name</label>
                    <input type="text" id="projectName" class="input" placeholder="Enter project name" required>
                    <div class="help-text">Choose a descriptive name for your project</div>
                </div>
                <div class="form-group">
                    <label for="projectDescription" class="label">Description</label>
                    <textarea id="projectDescription" class="input" placeholder="Optional description" rows="3"></textarea>
                    <div class="help-text">Briefly describe what this project is for</div>
                </div>
                <div class="form-actions">
                    <button class="btn secondary" id="cancelProjectBtn">Cancel</button>
                    <button class="btn" id="createProjectBtn">Create Project</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Artifact Modal -->
    <div class="modal" id="artifactModal" role="dialog" aria-labelledby="artifactModalTitle" aria-modal="true">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="artifactModalTitle">Edit Note</h3>
                <button class="close-btn" aria-label="Close note modal">×</button>
            </div>
            <div id="artifactContent">
                <div class="form-group">
                    <label for="artifactTitle" class="label label-required">Note Title</label>
                    <input type="text" id="artifactTitle" class="input" placeholder="Enter note title" required>
                </div>
                <div class="form-group">
                    <label for="artifactText" class="label">Content</label>
                    <textarea id="artifactText" class="input" placeholder="Write your note in markdown..." rows="10"></textarea>
                    <div class="help-text">You can use markdown formatting</div>
                </div>
                <div class="form-actions">
                    <button class="btn secondary" id="cancelArtifactBtn">Cancel</button>
                    <button class="btn" id="saveArtifactBtn">Save Note</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Project Selection Modal -->
    <div class="modal" id="projectSelectionModal" role="dialog" aria-labelledby="projectSelectionModalTitle" aria-modal="true">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="projectSelectionModalTitle">Select Project</h3>
                <button class="close-btn" aria-label="Close project selection modal">×</button>
            </div>
            <div class="modal-body">
                <div class="search-box">
                    <input type="text" id="projectSearchInput" class="input" placeholder="Search projects..." aria-label="Search projects">
                </div>
                <div class="projects-grid" id="projectsGrid">
                    <!-- Projects will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Conversation Selection Modal -->
    <div class="modal" id="conversationSelectionModal" role="dialog" aria-labelledby="conversationSelectionModalTitle" aria-modal="true">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="conversationSelectionModalTitle">Browse Conversations</h3>
                <button class="close-btn" aria-label="Close conversation selection modal">×</button>
            </div>
            <div class="modal-body">
                <div class="search-box">
                    <input type="text" id="conversationSearchInput" class="input" placeholder="Search conversations..." aria-label="Search conversations">
                </div>
                <div class="conversations-grid" id="conversationsGrid">
                    <!-- Conversations will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Web Search Modal -->
    <div class="modal" id="webSearchModal" role="dialog" aria-labelledby="webSearchModalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="webSearchModalTitle">Web Search Options</h3>
                <button class="close-btn" aria-label="Close web search modal">×</button>
            </div>
            <div class="modal-body">
                <p class="help-text">Search the web using AI-powered platforms, then import results into your conversation or notes.</p>
                
                <div class="web-search-options">
                    <div class="search-option">
                        <div class="search-option-header">
                            <div class="search-option-icon">🔍</div>
                            <div class="search-option-info">
                                <h4>Google AI Overview</h4>
                                <p>Opens Google with AI Overview enabled. Import AI summaries, featured snippets, or knowledge panel content</p>
                            </div>
                        </div>
                        <button class="btn" id="searchGoogleBtn">Search with Google AI</button>
                    </div>
                    
                    <div class="search-option">
                        <div class="search-option-header">
                            <div class="search-option-icon">🟣</div>
                            <div class="search-option-info">
                                <h4>Perplexity AI</h4>
                                <p>Search using Perplexity's AI research assistant with real-time citations</p>
                            </div>
                        </div>
                        <button class="btn" id="searchPerplexityBtn">Search with Perplexity</button>
                    </div>
                </div>
                
                <div class="search-instructions">
                    <h4>How it works:</h4>
                    <ol>
                        <li>Click a search option to open that platform in a new tab</li>
                        <li>Perform your search using the familiar interface</li>
                        <li>Look for the "Import to Branestawm" button on the search results</li>
                        <li>Click import to bring the AI response into your current conversation</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>